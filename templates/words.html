<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">    
  <title>Word Cloud</title>
  <link rel="stylesheet" href="static/css/mystyles.css" />
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-cloud/1.2.5/d3.layout.cloud.min.js"></script>
</head>

<body>
  <script>
    const params = new URLSearchParams(window.location.search);
    const isEmbed = params.has('embed');

    if (!isEmbed) {
      document.write(`
        <nav>
          <div class="bar">
            <a href="/"><p> Dashboard Home</p></a>
            <div class="navlinks">
                <a href="/llm" class="navlink">LLM</a>
                <a href="/timeline" class="navlink">Timeline</a>
                <a href="/people" class="navlink">People/Orgs</a>
                <a href="/similarity_report" class="navlink">Similarity Report</a>
                <a href="/words" class="navlink">Word Cloud</a>
                <a href="/bias" class="navlink">Bias</a>
              </div>
            <a href="#" class="hamburger">&#9776;</a>      
          </div>
        </nav>
      `);
    }
  </script>

  <main style="margin-top: 100px; text-align: center;">
    <div id="wordControls">
      <h1>Select Source Categories</h1>
      <form id="sourceForm">
        {% for folder in folders %}
          <label><input type="checkbox" name="folder" value="{{ folder }}"> {{ folder }}</label>
        {% endfor %}
        <br>
        <label class="range-label">
          Words: 
          <div class="range-inputs">
            <input id="word-range" type="range" min="5" max="100" step="5" value="50" name="word range" oninput="this.nextElementSibling.value=this.value">
            <input type="number" name="word amt" min="5" max="100" value="50" oninput="this.previousElementSibling.value=this.value" />
          </div>
        </label>
        <button type="submit">Generate Word Cloud</button>
      </form>
    </div>

    <div id="wordcloud" style="margin-top: 30px;"></div>
  </main>

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script>
    $(document).ready(function() {
      setTimeout(function() {
        $('.fade').fadeTo(400, 1);
        $('.text').fadeTo(300, 1);
        $('.review').fadeTo(300, 1);
      }, 300);
    });
  </script>

  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const hamburger = document.querySelector('.hamburger');
      const navLinks = document.querySelector('.navlinks');
      if (hamburger && navLinks) {
        hamburger.addEventListener('click', function () {
          navLinks.classList.toggle('show');
        });
      }

      // Hide controls when embedding
      if (window.location.search.includes('embed=true')) {
        const controls = document.getElementById("wordControls");
        if (controls) controls.style.display = "none";
      }
    });
  </script>

  <script src="static/words.js"></script>
</body>
</html>
